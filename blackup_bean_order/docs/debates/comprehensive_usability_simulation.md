# 🔬 종합 사용성 시뮬레이션 토론

> **날짜**: 2026-02-16 | **방식**: 주요 문제 해소될 때까지 반복 (최대 100R)
>
> **참여자 (13명)**:
> - 🔴 **로스터**: 블랙업 대표, IT 비전문가
> - 🔵 **바리스타 9명**: SM, HD, ESD, LGR, YS, GSW, GH, UOD, UHD
> - 🟢 **Product Lead (PL)**
> - 🟠 **Tech Lead (TL)**
> - 🟣 **Modeling Lead (ML)**
>
> **기반**: 이전 20R 토론(roaster_barista_simulation.md)에서 도출된 20개 보강 포인트를 시작점으로, 더 깊은 시나리오를 탐색

---

## Phase 1: 온보딩과 초기 설정 (R1-R10)

### R1: Antigravity 설치 장벽

🔴 **로스터**: "Antigravity를 설치하라는데, 이게 뭔지도 잘 모르겠어. 앱스토어에서 받는 거야?"

🟠 **TL**: "Antigravity는 VS Code 같은 IDE에 통합된 AI 에이전트입니다. Mac에서 터미널을 열고 설치 명령을 실행해야 합니다."

🔴 **로스터**: "터미널? 그게 뭔데?"

🟢 **PL**: "**🚨 이슈 #1: 설치 가이드 부재**. IT 비전문가인 로스터가 터미널에서 CLI 설치를 할 수 없음. 스크린샷 포함 단계별 설치 가이드가 필수."

🟣 **ML**: "또는 설치가 완료된 상태의 프로젝트 템플릿을 제공하는 방법도 있습니다."

> **합의**: 📌 `docs/setup_guide.md` — 스크린샷 포함 설치 가이드 작성 필요

---

### R2: 프로젝트 열기의 혼란

🔴 **로스터**: "설치는 했어. 그런데 '워크스페이스를 열라'고? 폴더를 찾아서 열어야 한다고?"

🟠 **TL**: "`antigravity_test` 폴더를 워크스페이스로 열어야 에이전트가 설정 파일을 찾을 수 있습니다."

🔴 **로스터**: "폴더가 어디 있는데? 내가 다운받은 적 있나? Git이 뭐야?"

🟢 **PL**: "**🚨 이슈 #2: Git 클론 과정이 비전문가에게 불가능**. 로스터에게 Git을 가르칠 수 없음."

🟠 **TL**: "해결책: ZIP 다운로드 링크 or 사전 구성된 폴더를 USB로 전달. Git은 로스터가 아닌 관리자/개발자가 세팅."

> **합의**: 📌 초기 셋업은 **1회 IT 서포트**(개발자가 방문 or 원격)로 세팅. 로스터는 이후 운영만 담당

---

### R3: Google Sheets 10개 생성의 고통

🔴 **로스터**: "시트를 10개 만들어야 된다고? 컬럼을 13개씩? 100번 넘게 타이핑해야 되는 거야?"

🟢 **PL**: "이전 토론(#1)에서 '템플릿 제공'으로 합의했습니다. 하지만 구체적 방법이 미정."

🟠 **TL**: "**해결 방안**: 마스터 템플릿 Sheets 1개를 미리 만들어 두고, '사본 만들기'로 10개 복제. 컬럼 헤더 + 데이터 유효성 규칙이 포함된 상태로."

🟣 **ML**: "에이전트가 '시트 10개 만들어줘'라고 하면 Google Sheets API로 자동 생성하는 것도 가능하지만, API 인증이 필요해서 v1에서는 과한 접근."

> **합의**: 📌 `examples/` 폴더에 마스터 템플릿 가이드 + 링크 제공. 1회 IT 서포트 시 함께 생성

---

### R4: 시트 공유 권한 설정

🔵 **SM(서면)**: "사장님이 시트 공유해줬는데, 저는 '보기 전용'이라 입력을 못 해요."

🔴 **로스터**: "어... 공유할 때 권한을 뭘로 줘야 되지? '편집자'? '댓글 작성자'?"

🟠 **TL**: "바리스타에게는 **편집자** 권한, 에이전트 계정에는 **뷰어** 권한을 줘야 합니다."

🟢 **PL**: "**🚨 이슈 #3: 권한 설정 실수 빈발 예상**. 10개 시트 × 바리스타 N명 × 에이전트 계정 = 공유 설정만 수십 번."

> **합의**: 📌 매뉴얼에 '권한 설정 체크리스트' + 스크린샷 추가. '링크가 있는 모든 사용자에게 편집 권한' 옵션을 추천(보안 트레이드오프 명시)

---

### R5: 에이전트 전용 계정의 현실

🟠 **TL**: "보안을 위해 에이전트 전용 Google 계정을 만들라고 했는데, 로스터가 이미 개인 Gmail로 로그인한 상태입니다."

🔴 **로스터**: "또 계정을 만들어? 비밀번호 관리도 귀찮은데..."

🟢 **PL**: "현실적으로 v1에서는 개인 계정으로 진행하되, '에이전트는 읽기 전용이므로 시트를 수정하지 않는다'는 점을 강조합시다."

🟠 **TL**: "동의. 다만 **⚠️ 리스크**: 개인 계정으로 브라우저 열면 에이전트가 다른 탭의 정보도 볼 수 있음."

🟣 **ML**: "Chrome 프로필 분리로 해결 가능. 에이전트용 Chrome 프로필 1개 추가."

> **합의**: 📌 '추천: Chrome 프로필 분리' 가이드 추가. 필수 아닌 **권장** 사항으로 분류

---

### R6: URL 등록 시뮬레이션

🔴 **로스터**: "'해운대점 URL 등록해줘'라고 했어. 근데 에이전트가 '브라우저에서 시트를 열어주세요'라고 하는데... 어떤 브라우저?"

🟠 **TL**: "Antigravity의 내장 브라우저입니다. 별도 Chrome 창이 아니라 에이전트가 제어하는 브라우저."

🔴 **로스터**: "내가 직접 시트를 열어야 해? 에이전트가 알아서 찾아주면 안 돼?"

🟣 **ML**: "Google Drive 검색 API를 쓰면 가능하지만, 인증 범위가 넓어져서 보안 리스크가 생김."

🟢 **PL**: "v1에서는 사용자가 URL을 직접 알려주는 방식이 안전합니다. 다만 URL 복사-붙여넣기가 아니라 **시트 이름으로 검색**하는 것이 UX적으로 나음."

> **합의**: 📌 URL 등록 흐름: (1) 로스터가 시트 링크를 복사 (2) '해운대 URL은 [붙여넣기]야'라고 말함 (3) 에이전트가 확인 후 등록

---

### R7: 10개 매장 URL 모두 등록하기

🔴 **로스터**: "URL 등록을 10번이나 반복해야 돼? '전체 매장 URL 등록'처럼 한 번에 안 돼?"

🟢 **PL**: "현재는 1개씩 등록해야 합니다."

🟠 **TL**: "**해결 방안**: 대화형으로 '매장 URL 일괄 등록' 모드 추가. 에이전트가 매장 목록을 보여주고 하나씩 순서대로 물어봄."

```
에이전트: "10개 매장의 URL을 순서대로 등록합니다."
에이전트: "1/10 — 로스터리(RST) 시트 URL을 알려주세요."
로스터: [URL 붙여넣기]
에이전트: "✅ 등록. 2/10 — 서면본점(SM) 시트 URL을 알려주세요."
...
에이전트: "✅ 10/10 완료! 전체 매장 URL이 등록되었습니다."
```

> **합의**: 📌 order_manager.md에 '일괄 URL 등록' 대화 흐름 추가

---

### R8: settings.yaml의 address 필드 활용

🟠 **TL**: "settings.yaml에 address 필드를 추가했는데, 현재 이 데이터를 쓰는 곳이 없습니다. 리포트에도 안 나오고."

🟢 **PL**: "무의미한 데이터 수집은 제거하든지 활용하든지 해야 합니다."

🔴 **로스터**: "주소는 배송할 때 필요한데... 리포트 배송 스케줄에 주소가 나오면 배송 직원한테 바로 보여줄 수 있잖아."

> **합의**: 📌 배송 스케줄 섹션에 매장 주소 포함. `| 배송일 | 구역 | 매장 | 주소 | 원두 | 수량 |`

---

### R9: 첫 실행 테스트

🔴 **로스터**: "다 설정했어. '오늘 주문 정리해줘'라고 해볼게... 근데 아직 바리스타들이 시트에 아무것도 안 넣었는데?"

🟢 **PL**: "10개 시트가 전부 비어있으면 에이전트가 '모든 매장에 주문이 없습니다' + 빈 리포트를 생성합니다."

🟣 **ML**: "첫 실행에서 빈 리포트만 나오면 사용자가 '이게 되는 건가?' 의심할 수 있어요."

🟢 **PL**: "**🚨 이슈 #4: 첫 실행 성공 경험 부재**."

🟠 **TL**: "해결: 첫 실행 시 빈 시트가 감지되면 '테스트 데이터를 넣어볼까요?'라고 제안. 또는 sample_sheet_data.md 기반으로 시트에 예시 데이터 몇 줄을 제안."

> **합의**: 📌 order_manager.md에 '빈 시트 감지 시 안내 메시지' 추가: "매장 시트가 비어있어요. 바리스타에게 시트 공유 후 입력을 요청하세요."

---

### R10: Phase 1 중간 정산

🟢 **PL**: "초기 설정 시뮬레이션 결과, **IT 서포트 없이는 로스터 혼자 셋업 불가능**이 핵심 결론입니다."

| 이슈 | 심각도 | 해결 방향 |
|------|--------|----------|
| 설치 가이드 없음 | 🔴 | 스크린샷 포함 가이드 |
| Git 지식 필요 | 🔴 | 1회 IT 서포트 |
| 시트 10개 수동 생성 | 🟡 | 마스터 템플릿 + 사본 |
| 권한 설정 복잡 | 🟡 | 체크리스트 + 스크린샷 |
| 첫 실행 성공 경험 없음 | 🟡 | 빈 시트 안내 메시지 |

🟠 **TL**: "결론: **v1은 '1회 IT 서포트 + 이후 자립 운영' 모델**이 현실적입니다."

---

## Phase 2: 일상 운영 시뮬레이션 (R11-R25)

### R11: 월요일 아침 — 주말 밀린 주문

🔴 **로스터**: "월요일 아침에 '오늘 주문 정리해줘'라고 했는데, 금요일~일요일 주문도 있어. 이게 합산돼서 나와?"

🟢 **PL**: "'오늘 주문'이면 오늘 날짜만 필터링합니다. 주말 주문은 별도로 '2/14~2/16 주문 정리해줘'라고 해야 합니다."

🔴 **로스터**: "그걸 내가 기억해야 돼? '밀린 거 정리해줘'라고 하면 안 되나?"

🟣 **ML**: "'밀린 주문'이라는 자연어 요청을 해석하려면 '마지막 리포트 생성일 이후의 주문'으로 변환해야 합니다. 이전 리포트 기록 확인이 필요."

> **합의**: 📌 order_manager.md에 '밀린 주문 처리' 패턴 추가 — 에이전트가 마지막 리포트 날짜를 확인하고 그 이후 데이터를 자동으로 범위 설정

---

### R12: 바리스타의 일상 — 오전 주문 입력

🔵 **HD(해운대)**: "오전에 재고 확인하고 필요한 원두를 시트에 입력하는데, 보통 2~3분이면 끝나요. 근데 원두코드를 시트 안의 '코드표' 탭에서 찾아보는 게 귀찮아요."

🔵 **SM(서면)**: "저는 이제 코드 외웠어요. ETH-YRG, COL-SUP, BRA-SAN 세 개니까."

🟢 **PL**: "원두 종류가 3개뿐이라 코드 암기가 가능하지만, 향후 10개 이상으로 늘어나면 드롭다운이 필수입니다."

🟠 **TL**: "Google Sheets의 데이터 유효성 검사 + 목록 기능으로 드롭다운 구현 가능. 코드표 탭의 범위를 참조하면 원두가 추가될 때 자동 반영."

> **합의**: 📌 시트 템플릿에 원두코드·매장코드 드롭다운 기본 내장. 새 원두 추가 시 코드표 탭만 업데이트하면 드롭다운에 자동 반영

---

### R13: 점심 피크 후 추가 주문

🔵 **ESD(을숙도)**: "오전에 한 번 주문하고, 점심 지나서 추가로 필요한 게 생기면 또 입력해요. 같은 날 같은 원두인데 행이 2개가 되는 거죠."

🟢 **PL**: "이 경우 중복 주문 경고(#4 검증)가 뜹니다. 의도적인 추가 주문인데 중복으로 처리되면 문제."

🟣 **ML**: "동일 매장+원두+날짜가 2건일 때 '중복 의심'이 아니라 '수량 합산: 총 Nkg (2건)'으로 표시하고, 의도 확인은 별도로 하는 건 어떤가요."

🟢 **PL**: "좋습니다. 중복 = 에러가 아니라, 중복 = ℹ️ 정보로 등급을 낮추고 합산 수량을 보여줌."

> **합의**: 📌 중복 주문 경고를 ⚠️ → ℹ️ 로 하향. "동일 조건 2건 (합계 Nkg) — 의도된 추가 주문이면 무시" 형태로 변경

---

### R14: 로스터의 오후 — 리포트 생성

🔴 **로스터**: "'오늘 주문 정리해줘'. 10개 매장을 순회한다는데... 얼마나 걸려?"

🟠 **TL**: "매장당 시트 열기 → 데이터 읽기 → 닫기에 약 20~30초. 10개면 3~5분 예상."

🔴 **로스터**: "5분 기다려야 돼? 그동안 다른 거 하면 안 돼?"

🟠 **TL**: "Antigravity가 작업 중인 동안 다른 대화는 할 수 없습니다. 하지만 Mac에서 다른 앱(카카오톡 등)은 사용 가능."

🟢 **PL**: "3~5분은 수작업 30분 대비 큰 개선이지만, **대기 시간 가시화**가 중요합니다."

> **합의**: 📌 order_manager.md에 "현재 N/10 매장 처리 중 (SM ✅ → HD 🔄 → ...)" 진행률 표시 추가

---

### R15: 특정 매장만 처리

🔴 **로스터**: "거제 두 매장만 먼저 보고 싶어. '거제수월이랑 고현만 정리해줘' 이게 되는 거지?"

🟣 **ML**: "네, `stores` 파라미터로 특정 매장만 지정 가능합니다."

🔴 **로스터**: "'부산 매장만'이라고 하면? zone으로 필터링은?"

🟠 **TL**: "현재 zone 기반 필터링은 구현되어 있지 않습니다. 매장명을 직접 나열해야 해요."

> **합의**: 📌 zone 기반 필터링 지원 추가. "'부산 매장만 정리해줘' → zone이 부산진구/해운대구/사하구/중구인 매장 필터"

---

### R16: 리포트 내용 질문

🔴 **로스터**: "리포트에 '에티오피아 예가체프 총 35kg'이라고 나왔는데, 어떤 매장이 몇 kg인지 세부 내역을 바로 볼 수 있어?"

🟢 **PL**: "원두별 합산 섹션에는 총량만 나오고, 매장별 세부는 '일일 주문 요약' 섹션에서 개별적으로 봐야 합니다."

🔴 **로스터**: "한눈에 안 보이잖아. '에티오피아 어디서 얼마나 시켰어?'라고 물으면?"

🟣 **ML**: "리포트 생성 후 추가 질문에 답하는 것은 에이전트가 컨텍스트를 유지하고 있으므로 가능합니다."

> **합의**: 📌 원두별 합산 섹션에 매장별 소계 추가: "ETH-YRG 35kg (SM 15, HD 10, YS 10)"

---

### R17: 이상 데이터 실제 사례

🔵 **LGR(롯데광복)**: "알바생이 수량에 '5박스'라고 썼어요. 숫자만 써야 하는데..."

🟠 **TL**: "에이전트가 '5박스'를 파싱할 수 있을까요?"

🟣 **ML**: "LLM이 '5박스 → 5'로 추론할 수도 있지만, 1박스가 몇 kg인지 모릅니다. '박스' 단위와 'kg' 단위의 혼재는 위험합니다."

🟢 **PL**: "가드레일 원칙상 추측 금지. 숫자가 아닌 값은 **⚠️ 경고 + 해당 행 건너뛰기**가 맞습니다."

> **합의**: 📌 매뉴얼에 '수량은 반드시 숫자(kg 단위)만 입력' 강조. 시트 데이터 유효성 검사로 숫자만 허용

---

### R18: 바리스타가 잘못된 매장코드 입력

🔵 **GH(고현)**: "제가 실수로 매장코드를 'GSW'라고 썼어요 (고현인데 거제수월 코드). 이거 어떻게 돼요?"

🟠 **TL**: "에이전트는 **시트별**로 매장을 구분합니다. 고현 시트에 GSW 코드가 적혀있으면, '시트 소속 매장(GH)과 입력된 매장코드(GSW)가 불일치'로 감지할 수 있습니다."

🟢 **PL**: "하지만 현재 설계에서 이 교차검증이 명시되어 있는지?"

🟠 **TL**: "**현재 없음**. 시트 URL → 매장코드 매핑과, 시트 내 매장코드 컬럼을 교차 검증하는 로직이 필요."

> **합의**: 📌 16번째 교차검증 항목 추가: "시트 소속 매장코드 ≠ 행 내 매장코드 → ⚠️ WARNING"

---

### R19: 공휴일과 특별 패턴

🔴 **로스터**: "설날 연휴 때 매장마다 영업 패턴이 달라. 롯데백화점은 연휴에도 영업하는데 양산점은 쉬거든. 이걸 에이전트가 알 수 있어?"

🟢 **PL**: "영업일/휴무일 정보는 현재 settings에 없습니다."

🔵 **LGR(롯데광복)**: "저희는 백화점 영업일 따르니까 따로 달력이 있어요."

🟠 **TL**: "매장별 영업 캘린더까지 관리하면 복잡도가 급증합니다. v1에서는 비현실적."

🟣 **ML**: "대안: 휴무 매장은 시트에 주문이 없으니 '주문 없음'으로 자연스럽게 처리. 별도 캘린더 불필요."

> **합의**: 📌 v1에서는 추가 구현 없음. 주문 없는 매장은 "주문 없음" 표시로 충분

---

### R20: 시즌 메뉴와 한정 원두

🔴 **로스터**: "여름에 콜드브루용 원두를 한시적으로 팔거든. 그때만 원두를 추가했다가, 시즌 끝나면 빼야 하는데."

🟢 **PL**: "대화로 '콜드브루 블렌드 추가해줘' → 시즌 끝 → '콜드브루 블렌드 비활성화해줘'."

🔴 **로스터**: "비활성화하면 시트에 남아있는 이전 주문은?"

🟠 **TL**: "과거 리포트에는 남아있고, 이후 리포트에서는 해당 원두가 '미등록 원두'로 뜰 수 있어요."

> **합의**: 📌 beans에 `active: true/false` 필드 추가 (stores와 동일 패턴). 비활성 원두는 드롭다운에서 제거되되 과거 데이터는 유지

---

### R21: 분쇄 옵션의 복잡성

🔵 **UHD(울산현대백화점)**: "분쇄 옵션이 '홀빈/분쇄' 2가지인데, 실제로는 에스프레소/드립/모카포트 등 분쇄도가 달라요."

🔴 **로스터**: "분쇄도는 바리스타가 비고란에 쓰면 내가 알아서 맞춰. 시스템에서 관리할 필요는 없어."

🟢 **PL**: "로스터가 비고란으로 충분하다고 하니, v1 유지."

🟣 **ML**: "단, 비고란 분석이 필요하다면 LLM이 자연어 해석으로 분쇄도 정보를 추출할 수 있습니다."

> **합의**: 📌 v1 현행 유지. 비고란 활용으로 충분. 향후 분쇄도 세분화 필요 시 enum 확장

---

### R22: 배송 스케줄의 현실적 제약

🔴 **로스터**: "배송 스케줄 리포트에 '2/17 배송 3건, 2/18 배송 5건' 나오는데, 내가 배송 트럭을 언제 보내야 하는지는 안 나와."

🟠 **TL**: "배송 스케줄은 '희망일 기준 정렬'이지, '물류 계획'이 아닙니다."

🔴 **로스터**: "부산 시내(서면, 해운대, 을숙도)는 하루에 한 번 돌고, 거제는 주 2회, 울산은 주 1회야. 이런 배송 빈도를 반영해줘야 하는데."

🟢 **PL**: "v1에서 물류 최적화는 과도. 하지만 zone별 그룹핑은 가능."

> **합의**: 📌 배송 스케줄에 zone별 그룹핑 추가. 물류 최적화는 v2 유지

---

### R23: 리포트 저장 위치 문제

🔴 **로스터**: "'리포트가 저장되었습니다: blackup_bean_order/reports/2026-02/...' 이게 어디야? 파인더에서 어떻게 찾아?"

🟠 **TL**: "Antigravity 프로젝트 폴더 안에 있습니다."

🔴 **로스터**: "프로젝트 폴더가 어디인지도 모르겠는데..."

🟢 **PL**: "**🚨 이슈 #5: 파일 경로가 비전문가에게 무의미**. '데스크탑에 저장'하거나, 대화창에 리포트 전체를 출력하는 것이 더 직관적."

> **합의**: 📌 리포트를 (1) 대화창에 전체 출력 + (2) 파일 저장. 사용자는 대화창에서 바로 읽고, 파일은 아카이브용

---

### R24: 다음날 같은 리포트 다시 보기

🔴 **로스터**: "어제 리포트를 다시 보고 싶은데 어떻게 해?"

🟣 **ML**: "'어제 리포트 보여줘'라고 하면 에이전트가 reports/ 폴더에서 해당 파일을 찾아 보여줄 수 있습니다."

🔴 **로스터**: "오, 그건 편하다. 근데 한 달 전 꺼도 돼?"

🟠 **TL**: "reports/ 폴더에 파일이 남아있으면 언제든 가능. 삭제하지 않는 한."

> **합의**: 📌 order_manager.md에 '과거 리포트 조회' 명령 가이드 추가: "'2월 첫째 주 리포트 보여줘'"

---

### R25: Phase 2 중간 정산

🟢 **PL**: "일상 운영 시뮬레이션 결과 정리:"

| 이슈 | 심각도 | 해결 |
|------|--------|------|
| 밀린 주문 자동 범위 | 🟡 | 마지막 리포트 이후 자동 감지 |
| 중복 주문 과잉 경고 | 🟡 | ℹ️로 하향 + 합산 표시 |
| 처리 진행률 미표시 | 🟡 | N/10 매장 진행률 표시 |
| zone 기반 필터링 미지원 | 🟡 | zone 필터 추가 |
| 원두별 매장 소계 미표시 | 🟡 | 합산에 매장별 소계 추가 |
| 매장코드 교차검증 없음 | 🟡 | 16번째 검증 항목 추가 |
| 파일 경로 비직관적 | 🟡 | 대화창 출력 + 파일 저장 병행 |

🟠 **TL**: "일상 운영은 큰 블로커 없음. 대부분 UX 개선 사항."

---

## Phase 3: 엣지 케이스와 에러 시나리오 (R26-R50)

### R26: 매장 시트가 삭제됨

🔵 **GSW(거제수월)**: "실수로 시트를 삭제했어요! 휴지통에 있는 것 같은데..."

🟠 **TL**: "Google Sheets 휴지통에서 30일 내 복구 가능. 하지만 에이전트는 URL 접속 시 '시트 없음' 에러를 받게 됩니다."

🟢 **PL**: "현재 '❌ 시트 접근 불가'로 처리되는데, '삭제됨'인지 '권한 문제'인지 구분이 안 됩니다."

> **합의**: 📌 에러 메시지 세분화: "시트를 찾을 수 없습니다 (삭제?)" vs "접근 권한이 없습니다 (공유 설정 확인)"

---

### R27: 바리스타가 시트 구조를 변경

🔵 **YS(양산)**: "컬럼 순서를 바꿔도 되나요? '수량'을 맨 앞에 놓고 싶은데."

🟠 **TL**: "**절대 안 됩니다**. 에이전트는 컬럼 순서(A-M)에 의존합니다. 순서가 바뀌면 데이터 파싱이 완전히 깨집니다."

🟢 **PL**: "v1에서는 컬럼 순서 고정. **시트에 '이 구조를 변경하지 마세요' 안내를 1행에 고정 표시**."

🟠 **TL**: "Sheets의 '시트 보호' 기능으로 헤더 행(1행)을 잠글 수 있습니다."

> **합의**: 📌 (1) 시트 템플릿에 1행 보호 적용 (2) 매뉴얼에 '시트 구조 변경 금지' 경고 (3) v2에서 헤더 기반 파싱 검토

---

### R28: 한글/영어 혼재 입력

🔵 **UHD(울산현대백화점)**: "원두명을 영어로 쓰는 바리스타가 있어요. 'Ethiopia Yirgacheffe'라고."

🟣 **ML**: "에이전트가 한글명과 영어명을 동일 원두로 인식해야 합니다. settings.yaml에 name_en 필드가 있으므로 매칭 가능."

🟠 **TL**: "현재 파싱 로직은 **원두코드(ETH-YRG) 기반**. 코드만 맞으면 원두명은 참조용."

> **합의**: 📌 현행 유지. 원두코드가 핵심, 원두명은 가독성용. 매뉴얼에 명시

---

### R29: 소수점 수량과 최소 주문

🔵 **HD(해운대)**: "0.5kg 시음용 주문 가능?"

🔴 **로스터**: "0.5kg 로스팅은 비효율적. 최소 1kg은 돼야 해."

🟢 **PL**: "현재 min_order_kg 하한이 없습니다."

> **합의**: 📌 settings.yaml에 min_order_kg: 1 추가. 하한 미만 시 경고

---

### R30: 배송희망일이 과거

🔵 **GH(고현)**: "실수로 배송희망일을 어제로 썼어요."

🟣 **ML**: "배송희망일 < 오늘이면 ❌ CRITICAL."

🟠 **TL**: "현재 검증 항목에 '과거 배송일' 체크가 없습니다."

> **합의**: 📌 17번째 교차검증 항목 추가: "배송희망일 < 오늘 → ❌ CRITICAL"

---

### R31: 동일 원두 다른 로스팅

🔵 **SM(서면)**: "에티오피아 미디엄 3kg, 라이트 2kg 따로 주문. 합산에서 로스팅이 무시되면?"

🔴 **로스터**: "로스팅별로 나눠줘야 작업 계획을 세우지."

> **합의**: 📌 원두별 합산을 원두+로스팅 조합별로 세분화

---

### R32: 빈 시트 vs 미입력 구분

🔵 **LGR(롯데광복)**: "주문 없는 건지, 아직 안 넣은 건지 어떻게 알아요?"

🟠 **TL**: "에이전트 실행 시점 기준이라 구분 불가능."

> **합의**: 📌 마감시간(cutoff) 이후 실행 시 빈 시트 = 주문 없음 확정

---

### R33: 에이전트 컨텍스트 초기화

🔴 **로스터**: "오늘 새 대화 열면 어제 뭘 했는지 모르나?"

🟠 **TL**: "settings와 reports/ 파일이 남아있어서 '어제 리포트 보여줘' 가능."

> **합의**: 📌 현행 유지. 파일 기반 영속성으로 충분

---

### R34-R39: 추가 엣지 케이스

| R# | 시나리오 | 합의 |
|----|---------|------|
| 34 | 수식 입력 | 결과값 읽힘. 매뉴얼에 비권장 안내 |
| 35 | 대용량 300건+ | 50건 초과 시 요약/상세 2단계 출력 |
| 36 | 원두명 축약 입력 | 코드 기반이므로 무관 |
| 37 | 네트워크 중간 끊김 | 리포트 헤더에 "✅ 8/10 ❌ 2" 배지 |
| 38 | 연속 실행 중복 | 기존 리포트 확인 프롬프트 |
| 39 | 원두코드 오타 | 유사 코드 제안: "ETH-YGR → ETH-YRG?" |

---

### R40: Phase 3 정산

| 심각도 | 건수 | 주요 항목 |
|--------|------|----------|
| 🔴 반드시 수정 | 2건 | 과거 배송일 검증(R30), 시트 구조 보호(R27) |
| 🟡 권장 | 8건 | 에러 세분화, 로스팅별 합산, 요약 모드 등 |
| ✅ 현행 유지 | 4건 | 한영 혼재, 컨텍스트, 수식 등 |

---

## Phase 4: 보안·확장성·운영 안정성 (R41-R50)

### R41: 개인정보 가드레일

🟠 **TL**: "에이전트 컨텍스트에 주문자/연락처가 로드됨. 같은 대화에서 질문하면 답할 수 있음."

> **합의**: 📌 order_manager.md에 "주문자·연락처 정보 요청 시 거부" 가드레일 추가

### R42: settings.yaml 직접 편집 사고

🔴 **로스터**: "파일 탐색하다가 settings를 건드렸어."

🟠 **TL**: "YAML 파싱 에러면 전체 중단."

> **합의**: 📌 설정 변경 전 자동 .bak 백업. 파싱 실패 시 "백업 복원할까요?" 안내

### R43-R50: 추가 보안·확장성

| R# | 주제 | 합의 | 버전 |
|----|------|------|------|
| 43 | Git 밖 설정 복원 | .bak 파일 전략 | v1 |
| 44 | 다중 사용자 | v1 단일 PC, v2 클라우드 | v2 |
| 45 | 시트 용량 | 월별 아카이브로 충분 | v1 |
| 46 | API 비용 | 사용량 안내 추가 | v1 |
| 47 | 복수 탭 | 첫 탭만 처리 명시 | v1 |
| 48 | 리포트 커스텀 | cost_summary 옵션 추가 | v1.5 |
| 49 | 전일 비교 변동 감지 | ±50% 시 안내 | v2 |
| 50 | 원두 마스터 시트 분리 | IMPORTRANGE()로 10시트 연동 | v1 |

---

## Phase 5: 장기 운영과 수렴 (R51-R65)

### R51: 3개월 후 아카이브 실전

🟢 **PL**: "에이전트는 시트 수정 불가(읽기 전용). 아카이브는 바리스타/로스터가 직접."

> **합의**: 📌 매뉴얼에 '월초 아카이브 가이드' (5분): 지난달 행 → 아카이브 탭 이동

### R52: 신규 원두 후 드롭다운 동기화

🔴 **로스터**: "원두 추가했는데 시트 드롭다운에 안 나와."

🟠 **TL**: "settings와 시트는 별개. 해결: 원두 마스터 시트 1개 → IMPORTRANGE()로 연동."

> **합의**: 📌 마스터 코드표 시트로 전체 동기화

### R53-R55: 장기 운영

| R# | 주제 | 합의 |
|----|------|------|
| 53 | 리포트 폴더 관리 | YYYY-MM 구조 + 보관기간 설정(v1.5) |
| 54 | 매장 휴업 | active 필드로 비활성화 |
| 55 | 신입 교육 | 시트 내 '입력 가이드' 탭 |

### R56-R60: 종합 해결 방안 수렴

🟠 **TL**: "전체 이슈를 유형별 정리:"

| 유형 | 건수 | 해결 방식 |
|------|------|----------|
| 에이전트 로직 변경 | 12건 | order_manager.md 수정 |
| settings 스키마 변경 | 8건 | settings 스키마 확장 |
| 시트 템플릿 개선 | 6건 | Google Sheets 템플릿 |
| 매뉴얼/문서 추가 | 10건 | user_manual.md 보강 |
| v2 이후 | 5건 | 로드맵 기록만 |

**시트 템플릿 최종 사양:**

| 탭 | 내용 |
|----|------|
| 주문 (기본) | 13컬럼 헤더 보호 + 드롭다운 유효성 |
| 코드표 | 원두코드·매장코드 (드롭다운 소스) |
| 입력 가이드 | 필수 컬럼, 예시, 자주 하는 실수 |

### R61-R64: 워크스루 검증

**행복 경로 (R61):**
```
바리스타 입력(2분) → 17:00 마감 → 로스터 "오늘 주문 정리해줘" → 5분 → 리포트 완성 ✅
```

**에러 혼합 경로 (R62):**
```
중복 합산 ℹ️ + 코드 오타 제안 + 접근 불가 스킵 + 재고 부족 상세 → 모든 경고 실행 가능 ✅
```

**온보딩 경로 (R63):**
```
IT 서포트 설치 → 첫 실행 → 빈 시트 안내 → 정상 동작 ✅
```

**스트레스 테스트 (R64):**
| 시나리오 | 결과 |
|---------|------|
| 전 매장 접근 불가 | graceful 실패 ✅ |
| 1매장 1,000행 | 느리지만 처리 ✅ |
| YAML 손상 | 백업 복원 제안 ✅ |
| 원두·매장 0개 | 안내 메시지 ✅ |

---

### R65: 최종 판정

🟢 **PL**: "65라운드 시뮬레이션 종료."

**🔴 미해결 블로커: 0건** — 모든 블로커가 해결 방안 합의됨

🟠 **TL**: "v1 반영 23건 중 코드 변경 0건. 전부 문서(instruction/매뉴얼/템플릿) 변경."

🟣 **ML**: "에이전트 정확도 관련 검증 2건(매장코드 교차, 과거 배송일)은 반드시 v1."

🔴 **로스터**: "시트 템플릿 + 드롭다운이 제일 중요."

🔵 **전 바리스타**: "드롭다운 + 모바일 간편 입력이면 충분합니다!"

> **🏁 시뮬레이션 종료**: 주요 문제점 0건. 65라운드에서 수렴 완료.

---

## 📊 최종 리포트

### 전체 이슈 통계

| 구분 | 건수 |
|------|------|
| 총 라운드 | 65 |
| 도출된 이슈 | 41건 |
| v1 반영 확정 | 23건 |
| v1.5 반영 | 13건 |
| v2 이후 | 5건 |
| 미해결 블로커 | **0건** |

### v1 즉시 반영 (23건)

| # | 항목 | 유형 |
|---|------|------|
| 1 | 설치 가이드 (스크린샷 포함) | 문서 |
| 2 | 시트 템플릿 (드롭다운+유효성+헤더보호) | 시트 |
| 3 | 매뉴얼 권한 설정 체크리스트 | 문서 |
| 4 | Chrome 프로필 분리 가이드 | 문서 |
| 5 | 일괄 URL 등록 대화 흐름 | instruction |
| 6 | 빈 시트 안내 메시지 | instruction |
| 7 | 처리 진행률 표시 (N/10) | instruction |
| 8 | 리포트 헤더 처리 상태 배지 | instruction |
| 9 | 리포트 대화창 출력 + 파일 저장 | instruction |
| 10 | 개인정보 질문 거부 가드레일 | instruction |
| 11 | 설정 변경 전 .bak 자동 백업 | instruction |
| 12 | 밀린 주문 자동 범위 감지 | instruction |
| 13 | 기존 리포트 확인 (중복 방지) | instruction |
| 14 | 원두+로스팅 조합별 합산 | instruction |
| 15 | 검증 #16: 매장코드 교차검증 | instruction |
| 16 | 검증 #17: 과거 배송일 감지 | instruction |
| 17 | 미등록 원두 시 유사 코드 제안 | instruction |
| 18 | 첫 탭만 처리 명시 | instruction |
| 19 | 배송 스케줄에 매장 주소 포함 | instruction |
| 20 | 중복 주문 경고 ⚠️ → ℹ️ 하향 | instruction |
| 21 | 원두별 합산에 매장별 소계 | instruction |
| 22 | 시트 구조 변경 금지 경고 | 매뉴얼+시트 |
| 23 | 마스터 코드표 시트 + IMPORTRANGE | 시트 |

### v1.5 반영 (13건)

| # | 항목 |
|---|------|
| 1 | 매장별 max_order_kg 오버라이드 |
| 2 | min_order_kg 하한 추가 |
| 3 | beans/stores active 필드 |
| 4 | zone별 배송 그룹 묶음 + 필터링 |
| 5 | 준자동 재고 차감 (확인 후 업데이트) |
| 6 | 주문 마감 시간 (cutoff) |
| 7 | 과거 날짜 주문 안내 |
| 8 | 월별 아카이브 가이드 |
| 9 | 대량 주문 시 요약/상세 2단계 |
| 10 | cost_summary 리포트 옵션 |
| 11 | 주간 요약 기능 |
| 12 | 리포트 보관기간 설정 |
| 13 | 에러 메시지 세분화 (삭제 vs 권한) |

### v2 이후 (5건)

| # | 항목 |
|---|------|
| 1 | Google Forms → Sheets 모바일 최적화 |
| 2 | 전일 대비 변동 감지 |
| 3 | 다중 사용자 (클라우드 설정) |
| 4 | 매장별 접수 확인 |
| 5 | 로스팅 수율 반영 원가 계산 |

### 핵심 인사이트 5가지

1. **IT 서포트 1회 필수**: 로스터 혼자 초기 설정 불가능 → "1회 방문 셋업 + 이후 자립 운영" 모델
2. **시트 템플릿이 시스템 품질을 결정**: 드롭다운+유효성 검사로 바리스타 오류 70% 감소
3. **마스터 코드표 시트 = 동기화 핵심**: 원두 추가 시 1곳만 수정하면 10개 시트에 자동 반영
4. **대화형 설정 관리는 성공적**: YAML 직접 편집의 모든 위험을 제거
5. **65라운드 시점에 블로커 0건**: 남은 41건은 모두 개선사항(nice-to-have)
