# 💬 긴급 토론: 출고 후 프로세스 및 수신 확인 (Post-Delivery Process)

**일시**: 2026-02-16 23:30
**주제**: 로스터리 출고 이후의 배송 관리, 매장 수신 확인, 최종 업무 완료 기준 정립
**참여자**:
- 👤 **Product Lead (PL)**: 사회자. 사용자 경험 및 프로세스 완결성 담당.
- ⚙️ **Tech Lead (TL)**: 시스템 아키텍처 및 구현 타당성 검토.
- 📊 **Modeling Lead (ML)**: 데이터 모델링 및 상태 관리.
- ☕️ **Roaster Agent (김로스터)**: 로스터리 실무자 대변.
- 🏪 **Store Manager (이점장)**: 매장 관리자 대변.

---

## 1. 문제 제기

**👤 PL**: 현재 시스템은 "주문 집계 -> 리포트 생성"까지만 커버하고 있습니다. 사용자가 지적했듯이, 로스터리가 물건을 보낸 뒤(출고), 매장이 잘 받았는지(수신), 그리고 이 사이클이 끝났는지(완료) 확인하는 절차가 공백입니다.

**☕️ 김로스터**: 맞아요. 리포트 보고 택배 싸서 보내고 나면, 이게 잘 도착했는지 불안해요. 가끔 배송 사고 나면 매장에서 며칠 뒤에야 "왜 안 와요?" 연락 오거든요. 그때 송장 찾으려면 멘붕입니다.

**🏪 이점장**: 저희도 답답해요. 주문은 했는데 언제 오는지, 송장 번호는 뭔지 알 수가 없어요. 그렇다고 바쁜 점심시간에 로스터리에 전화해서 물어보기도 미안하고요.

## 2. 솔루션 아이디어

**📊 ML**: 데이터 관점에서는 **'주문 상태(Status)'** 관리가 필요합니다. 현재는 그냥 '주문 내역'만 있죠.
- **AS-IS**: 주문 생성
- **TO-BE**: 주문 생성 → 접수 확인(Acknowledged) → 출고 완료(Shipped) → 수령 완료(Received)

**⚙️ TL**: 상태 관리는 좋은데, 플랫폼이 Google Sheets라는 게 제약입니다. Sheets는 기본적으로 데이터베이스가 아니라 뷰(View)라서, 상태를 실시간으로 동기화하기 까다롭습니다.
매장이 주문한 시트(A)와 로스터리가 보는 리포트(B)가 분리되어 있잖아요? 로스터리가 B에서 "출고함" 찍어도 매장은 A에서 그걸 바로 못 봐요.

**👤 PL**: 그렇다고 매장용 시트 10군데를 로스터리가 일일이 들어가서 "보냄" 찍는 건 불가능해요.

## 3. 프로세스 설계 논쟁

### 안건 1: 출고 알림 (Notification)

**☕️ 김로스터**: 저는 그냥 한 곳에만 입력하고 싶어요. 리포트 파일에 적든, 별도 시트에 적든요.

**🏪 이점장**: 저는 제 주문 시트 옆에 '운송장 번호'나 '배송 출발' 뜨면 좋겠어요.

**⚙️ TL**: (기술 검토) 
1. **Google Sheets 양방향 동기화**: 로스터리가 마스터 시트에 송장 넣으면, 스크립트가 각 매장 시트에 뿌려주는 방식. 개발 공수 큼.
2. **메신저(Slack/Kakao) 알림**: 로스터리가 에이전트에게 "오늘 배송 다 보냈어, 송장 파일 여기 있어" 하면 에이전트가 각 매장 매니저에게 DM 쏘는 방식.
3. **단순 리포트 공유**: 로스터리가 '배송 현황 리포트'를 PDF로 공유.

**👤 PL**: 'Google-native' 원칙과 '간편함'을 고려하면, **Slack 알림**이 제일 현실적이지 않을까요? 업무용 메신저 쓰시나요?

**☕️ 김로스터**: 네, 사내 슬랙 씁니다.

**결정 (잠정)**: 
- 로스터리가 '택배사 송장 엑셀'을 업로드하거나 에이전트에게 주면, 에이전트가 **매장별로 파싱해서 슬랙 채널(또는 DM)로 알림**을 보낸다.
- 알림 내용: "📦 [서면본점] 2/16 주문하신 원두가 발송되었습니다. (송장: CJ 1234-5678)"

### 안건 2: 수신 확인 (Check)

**🏪 이점장**: 물건 받으면 박스 까서 수량 맞는지 세어보고... 어디에 '확인' 누르면 되나요? 다시 시트 켜기 귀찮은데.

**📊 ML**: 데이터 완결성을 위해선 '수령 완료' 플래그가 꼭 찍혀야 합니다. 그래야 나중에 "안 받았다" 분쟁이 없죠.

**⚙️ TL**: 슬랙 알림에 **[수령 확인] 버튼**을 달아주는 건 어때요? (Slack Interactive Message). 버튼 누르면 백그라운드에서 Sheets나 DB에 '시간, 매장, 완료' 기록하고요.

**☕️ 김로스터**: 오, 그거 좋네요. 그럼 저는 대시보드(마스터 시트)에서 "서면: 수령완료", "해운대: 배송중" 이렇게 볼 수 있는 거죠?

**👤 PL**: 너무 기술적으로 가지 맙시다. v1 단계에서 슬랙 앱까진 오버엔지니어링일 수 있어요.
**1단계(MVP)**: 매장별 주문 시트에 **'수령확인' 체크박스 컬럼** 하나 추가합시다. 매니저는 물건 받고 시트 켤 일 있을 때(다음 주문 하거나 재고 정리할 때) 체크하면 됩니다.
**2단계(v2)**: 슬랙 버튼 연동.

**🏪 이점장**: 음.. 사실 매일 주문 넣으니까, 내일 주문 넣을 때 "어제 거 받았음" 체크하는 건 어렵지 않아요. 시트에 있는 게 기록 남기도 좋고.

### 안건 3: 로스터리 최종 완료 (Close)

**📊 ML**: 그럼 로스터리의 '최종 업무 완료'는 언제인가요?
1. 택배 보냈을 때?
2. 모든 매장이 수령 확인 했을 때?

**☕️ 김로스터**: 현실적으로 2번은 통제가 안 됩니다. 매장이 까먹고 체크 안 하면 제 업무가 영원히 안 끝나요.
제 업무는 **'출고 완료 & 알림 발송'** 시점에서 일단락되고, **'미수령/오배송 클레임 대응'**은 별도 프로세스로 봐야 합니다.

**👤 PL**: 동의합니다. 시스템상 'Cycle Close'는 **출고 정보 입력 시점**으로 잡되, **'장기 미수령 감지'** 기능을 에이전트가 수행해주는 걸로 합시다.
(예: 출고 3일 지났는데 매장 시트에 '수령확인'이 안 찍혀 있으면 에이전트가 "서면점, 물건 아직 안 왔나요?" 하고 물어보기)

## 4. 합의된 프로세스 (Revised)

1.  **주문 취합 & 발송**: 에이전트 리포트 생성 → 로스터리 패킹 & 발송.
    *   *변경*: 송장 번호는 시트에 적지 않고, **Slack으로 사진/번호를 공유** (Human Process).
2.  **📌 [NEW] 수신 확인 (Receiving)**:
    *   매장 시트의 **맨 마지막 컬럼**에 `수령확인` (체크박스) 추가.
    *   매장 매니저는 물건 수령 후 체크.
3.  **📌 [NEW] 모니터링 (Alert)**:
    *   로스터가 별도로 "발송함"을 기록하지 않음 (업무 최소화).
    *   대신 **주문 접수일(주문일) 기준**으로 자동 카운트.
    *   **조건**: `주문일 + 2일`이 지났는데 `수령확인`이 없으면 **⚠️ 미수령 경고** 리포팅.
    *   예: 2/1 주문 → 2/3까지 체크 없으면 경고.

## 5. 개발 반영 계획

**⚙️ TL**: 이걸 당장 v1에 다 넣기는 벅찹니다. 시트 구조가 바뀌어야 해요 (컬럼 추가).
**B-Items** 문서 작업은 예정대로 하고, 이 프로세스는 **v1.5 스펙**으로 잡아 빠르게 구현하는 게 좋겠습니다.

**👤 PL**: 대신, **매장 시트에 '수령확인' 컬럼을 미리 만들어두는 것**은 지금(v1) 해야 합니다. 나중에 추가하면 데이터 밀리고 꼬여요.
그리고 **송장 번호 기입란**도 시트에 미리 확보합시다.

**결론 (Action Items)**:
1.  **시트 템플릿 수정**: `수령확인` 체크박스 컬럼만 추가 (맨 마지막 열).
2.  **Agent 스킬 추가 (Delivery Monitor)**: 
    *   송장 입력 기능 제외.
    *   **미수령 감지 로직 구현** (주문일 + 2일 경과 체크).
3.  **개발 스케줄**: v1.5 우선순위 유지.

---
**서명**: 👤PL, ⚙️TL, 📊ML, ☕️Roaster, 🏪Store
